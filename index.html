<html>
	<head>
		<script src="taffy-min.js"></script>
		<script src="https://d3js.org/d3.v5.min.js"></script>
		<script src="chart2.js"></script>
		 <link rel="stylesheet" href="chart.css">
		 <link rel="stylesheet" href="main.css">
	</head>
	<body>
		<div id = "main">
			<div id = "nav-bar-wrapper" class = "main-grid-item">
				<div id = "nav-bar">
					<div class = "navbar-link" id = "summary-link"><div class = "navbar-link-title link1">SUMMARY</div></div>
					<div class = "navbar-link" id = "data-analysis-link"><div class = "navbar-link-title link1">DATA</div></div>
					<div class = "navbar-link" id = "film-analysis-link">
						<div class = "navbar-link-title link1">FILM ANALYSIS</div>
						<div id = "sublink-wrapper">
							<div class = "navbar-sublink link2">LAMB GRAVITY</div>
							<div class = "navbar-sublink link2">BASKET CUTS</div>
							<div class = "navbar-sublink link2">BIGS AS CATALYSTS</div>
							<div class = "navbar-sublink link2">PICK AND ROLL</div>
							<div class = "navbar-sublink link2">POST SEALS</div>
							<div class = "navbar-sublink link2">SCREENS</div>
						</div>
						
					</div>
					<div class = "navbar-link link1" id = "discussion-link">DISCUSSION</div>
					<div class = "navbar-link link1" id = "conclusion-link">CONCLUSION</div>
				</div>
			</div>
			<div id = "content" class = "main-grid-item">
				<div id = "page-title" class = "header1">UVM Basketball Offensive Analysis</div>
					<div class = "section">
						<div class = "section-header header2">Summary</div>
						<div class = "section-description" id = "summary">
							In the following analysis, I dive deep into at the UVM men's basketball team's offense. Using the possessions from 5 games -- Dartmouth (H), Albany (A), Stony Brook (A), Hartford (A), and UMBC (H) -- I conduct a data analysis breaking down the points per possession for situational offense (halfcourt vs. transition vs. putbacks), kinds of halfcourt possession (set offense vs. base offense), and shot type (Contested 3, Semi contested layups, open 2, etc.). I also pinpoint particular key areas of the offense and ways to boost efficiency in these key areas. They are maximizing Anthony Lamb's Gravity on the court, situational basket cuts, bigs as offensive catalysts, optimizing pick and roll, post seals to create penetration lanes, and reads regarding screens. Finally, I discuss more abstract concpets of offense and a global philosophy. 
						</div>
					</div>
					<div class = "section">
						<div class = "section-header header2">Data Analysis</div>
						<div class = "section-description">
								In this section I look at the data collected from each possession and discuss the meaning behind it.
							</div>
						<div class = "section-content" id = "data-analysis">
						</div>
					</div>
					<div class = "section">
						<div class = "section-header header2">Film Analysis</div>
						<div class = "section-description">
							</div>
						<div class = "section-content" id = "film-analysis">
							<div class = "header3 film-analysis-header">Maximizing Lamb's Court Gravity</div>
							<div class = "film-analysis-section">
								
								<div class = "section-description">
									<p>In football there is a concept that some players tilt the defense in their direction. If a defense believes that a single player is dangerous enough, they may commit extra defenders to his side of the field in order to contain him. Tyreek Hill of the Chiefs comes to mind. His speed is so lethal that defenses often trade a balanced defensive structure in order to mitigate the threat of a long touchdown. This defensive strategy can work, but an offense can exploit this defensive strategy if it is able to take advantage of the extra space provided for the other players.</p> 

									<p>Anthony Lamb is a defensive tilting player. When he catches the ball in a dangerous position, or there is a threat of him catching the ball in a dangerous position, the help defense gravitates towards him. Below are a number of examples where the defense tries to nullify the threat of Lamb. In some cases, the offense executes on the advantage of an over helping defense, other times not. I focus on ways to use the gravity Lamb has on a defense to maximum effect. </p>
								</div>
								<div class = "film-analysis-module">
									<div class = "film-analysis-video"></div>
									<p class = "film-analysis-text">Here is an example of a common defensive strategy when Lamb is posting up in the mid post. His defender fronts him, and backside help prevents an over the top pass. A counter to this style of defense is to have Davis flash to the pocket of space in the center of the defensive diamond. There are a number of positive outcomes that this action can allow. If Davis catches the ball in this space and his defender steps up, Lamb has already sealed his defender for a layup. It is also likely that Shungu’s defender will become occupied with this action, priming for a backdoor cut. If Davis’s defender steps up to prevent the pass, Lamb now has perfect position for an over the top pass for a layup (a Shungu backdoor cut is also likely open in this scenario as well). </p>

								</div>

								<p>Here is a similar situation, but instead of a single defender committing to the backside help there are two defenders. After Everett clears to the other side of the floor, his defender stays to try to impact the pass. The correct read here would have been for Gidden to set a flare screen for Everett in the corner for a wide (!) open 3.</p>

								<p>This time, Albany uses a different defensive strategy. Their on ball defender sinks off of Shungu to try to intercept the pass. Notice two things: Shungu’s defender’s body positioning and the backside help. If Lamb is able to seal his defender and Shungu there is a clear lane to drive to the hoop. Because Shungu’s defender is so concerned about Lamb, he compromises his primary defensive responsibility: containing the ball handler. The most likely scenario if Shungu drives to the hoop is Everett’s defender steps in to help leaving Everett wide open for 3. </p>

								<p>Here is an interesting case where Gidden’s defender stunts towards Lamb. There are a number of positive outcomes that can arise from this situation, and the most important thing to unlock them is the simple fact that Lamb immediately looks to facilitate. The best option in my opinion is to kick the ball immediately out to Gidden on the perimeter. From here Smith comes for a handoff+Gidden screen, and since Gidden’s defender is so far away he is in no position to help off of the handoff. Smith’s defender (on a switch) likely goes under the screen, and if Gidden adjusts his screen accordingly Smith gets a wide open 3. If the defender goes over the screen, Smith can attack the basket at pace and either commits Everett’s defender for a wide open 3, or has a lane to finish at the rim. </p>

								<p>As it happened, Gidden elects to make a basket cut. This is not ideal because it doesn’t punish the fact that Gidden’s defender leaves him. In fact Gidden goes to his defender which allows him to recover easily. The only reason the play ends well is because Smith’s defender is confused and doesn’t realize that he doesn’t need to help off the Gidden cut. This opens up Everett for a semi contested 3. What would have been more effective is if Gidden cut to set a flare screen for Everett for an open 3. </p>


								<p>When you run a curl screen with Lamb, we can anticipate that Lamb’s defender won’t do much to hedge the curl because Lamb is such a dangerous shooter. A switch is also unlikely because of the advantage Lamb has in the post. So, this is a pass that really should happen. If  the action on the weak side started with Deloney closer to the corner instead of under the basket, it would provide maximum spacing and make it more difficult for the help to impact the curl action. As it happens Shungu decides against the pass and the offense resets.</p>

								<p>This highlights a greater point of Lamb as a screen setter. From the film I have analyzed, Lamb is a great, but inconsistent screen setter. Sometimes he doesn’t fully commit, or put in full effort  to a screen, but when he does he almost always creates space for the player he is screening. When he does create space off a screen it is extremely valuable because the defense must decide between helping off of Lamb, or allowing a cut to happen. If Lamb commits to becoming a more consistent screener, the effects can be devastating if the offense makes the right reads. </p>


								<p>Here we see that, despite the fact Lamb is not in a particularly dangerous position, the entire help is still overly concerned about Lamb. Robin’s defender is particularly blind to his man. There are two schools of thought here. You could have Robin stay in the corner but, even though his defender isn’t guarding him, he is still in the passing lane and could get a deflection. The best option in my opinion is for Robin to make a backdoor cut, to create a new passing lane, and though help will probably come from the other side of the floor, a kick out three to Patella is likely. </p>


							</div>
							<div class = "film-analysis-section">
								
							</div>
							<div class = "film-analysis-section">
								
							</div>
							<div class = "film-analysis-section">
								
							</div>
							<div class = "film-analysis-section">
								
							</div>
							<div class = "film-analysis-section">
								
							</div>
						</div>
					</div>
				
			</div>
		</div>

		<div id='layout'>
		    <!-- <h2>Bar chart example</h2> -->
		    <div id='possession-type-chart' class = "bar-chart">
		      <svg />
		    </div>
		    <div id='possession-result-chart' class = "bar-chart">
		      <svg />
		    </div>
		    <div id='play-type-chart' class = "bar-chart">
		      <svg />
		    </div>
		  </div>
		<script>




			var possessions = TAFFY([]);
			//insert_data()
			

			function insert_data(){
				d3.csv("/uvm-analysis/data/possessions2.csv").then(function(data) {
					data.forEach(function(d) {
					    d.Points = +d.Points;
					    possessions.insert(d)
					    //console.log(d)
					  });
					insert_flow_chart()
					insert_shot_type_chart()
					insert_play_type_chart()
				});
			}

			function get_flow_object(flow_type){
				var poss = possessions({Flow: flow_type})
				var points = poss.sum("Points")
				var count = poss.count()
				var val = points/count;
				var scl = possessions({Flow: flow_type, Shot_type: "Semi-contested layup"})
				console.log(flow_type + " semi-contested layups: " + scl.count())
				return {type: flow_type, value: val.toFixed(2), count: count}
			}

			function insert_flow_chart(){
				var halfcourt_obj = get_flow_object("Halfcourt")
				var transition_obj = get_flow_object("Transition")
				var putback_obj = get_flow_object("Putback")

				var data = [halfcourt_obj, transition_obj, putback_obj]
				initialize_chart(data, "#possession-type-chart")

				//console.log("points per halfcourt possession: " + halfcourt_points/halfcourt_count)
				//console.log("points per transition possession: " + transition_points/transition_count)
				//console.log("points per putback possession: " + putback_points/putback_count)
			}

			function get_shot_type_object(shot_type){
				var poss = possessions({Shot_type: shot_type})
				var points = poss.sum("Points")
				var count = poss.count()
				var val = points/count;
				return {type: shot_type, value: val.toFixed(2), count: count}
			}

			function insert_shot_type_chart(){
				var scl = get_shot_type_object("Semi-contested layup")
				var cl = get_shot_type_object("Contested layup")
				var ol = get_shot_type_object("Open layup")
				var sc3 = get_shot_type_object("Semi-contested 3")
				var c3 = get_shot_type_object("Contested 3")
				var o3 = get_shot_type_object("Open 3")
				var c2 = get_shot_type_object("Contested 2")
				var sc2 = get_shot_type_object("Semi-contested 2")
				var fl = get_shot_type_object("Floater")
				var data = [ol, o3, scl, sc3, sc2, cl, c3, c2, fl, ];
				initialize_chart(data, "#possession-result-chart")
			}

			function get_play_type_object(play_type){
				var poss = possessions({Play: play_type})
				var points = poss.sum("Points")
				var count = poss.count()
				var val = points/count;
				return {type: play_type, value: val.toFixed(2), count: count}
			}

			function insert_play_type_chart(){
				var sets = get_play_type_object("Set")
				var base = get_play_type_object("Base")
				var zone = get_play_type_object("Zone")
				var data = [sets, base, zone]
				initialize_chart(data, "#play-type-chart")
			}

			function test_query(){
				console.log(possessions({Opponent: "Albany"}).get())
			}
		</script>
	</body>
				
</html>